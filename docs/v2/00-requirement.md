# 产品需求文档 - Twitter Space Transcription Platform

## 产品定位

**公开的 Twitter Space 转录库 + 付费 AI 问答平台**

### 核心理念
- 📖 **转录内容公开** - 所有已完成的转录对所有人可见（无需登录）
- 💰 **转录需要付费** - 用户支付 0.2 USDC 转录新 Space
- 🤖 **AI 问答付费** - 对已转录的 Space 进行 AI 问答需要支付
- 🌐 **去中心化支付** - 使用 x402 协议，用户无需支付 Gas 费

---

## 目标用户

### 主要用户
1. **Crypto 社区成员** - 想要保存和回顾重要的 Twitter Space 讨论
2. **内容创作者** - 需要将 Space 转录为文字进行二次创作
3. **研究人员** - 分析 crypto 社区讨论趋势和观点

### 用户痛点
1. Twitter Space 没有官方转录功能
2. 重要讨论结束后无法回顾
3. 手动转录耗时且不准确
4. 想要快速了解长时间 Space 的核心内容

---

## 核心功能

### 1. 浏览转录库（免费）

**功能描述**：
- 用户访问首页即可看到所有已完成转录的 Spaces
- 展示 Space 标题、创建者、时长、参与者、完成时间
- 支持搜索和筛选

**访问权限**：公开，无需登录

**页面**：`/` (Dashboard)

**数据来源**：
```
GET /api/spaces
返回: { spaces: Space[] }
```

---

### 2. 查看转录内容（免费）

**功能描述**：
- 点击某个 Space 进入详情页
- 查看完整的格式化转录内容
- 显示说话人标识和时间戳
- 显示参与者列表

**访问权限**：公开，无需登录

**页面**：`/spaces/[id]`

**数据来源**：
```
GET /api/spaces/[id]
返回: { title, transcript, participants, duration, ... }
```

---

### 3. 转录新 Space（付费）

**功能描述**：
- 用户输入 Twitter Space URL
- 支付 0.2 USDC
- 系统开始转录（后台异步处理）
- 显示实时进度
- 完成后转录内容公开可见

**访问权限**：需要连接钱包并支付

**价格**：0.2 USDC（约 $0.20）

**流程**：
1. 用户输入 Space URL
2. 点击 "转录"
3. 连接钱包（RainbowKit）
4. 支付 0.2 USDC（x402 协议，无 Gas）
5. 支付成功 → 创建转录任务
6. Worker 处理：下载音频 → Whisper 转录 → GPT-4o 格式化
7. 完成后更新数据库状态
8. 用户可以在 Dashboard 看到新转录的 Space

**技术实现**：
- Next.js middleware（x402 支付）
- API Route：`POST /api/transcribe`
- 后台 Worker：轮询任务队列

---

### 4. AI 问答（付费）

**功能描述**：
- 在 Space 详情页面，用户可以提问
- AI 基于转录内容回答问题
- 使用 OpenAI Agent SDK

**访问权限**：需要连接钱包并支付

**价格**：0.5 USDC/次（约 $0.50）

**流程**：
1. 用户在 Space 详情页输入问题
2. 点击 "提问"
3. 连接钱包（如果未连接）
4. 支付 0.5 USDC（x402 协议）
5. 后端调用 OpenAI Agent SDK
6. 返回 AI 回答并显示

**技术实现**：
- Next.js middleware（x402 支付）
- API Route：`POST /api/chat`
- OpenAI Agent SDK

---

## 非功能需求

### 性能要求
- Dashboard 加载时间 < 2 秒
- Space 详情页加载时间 < 3 秒
- AI 问答响应时间 < 10 秒
- 转录处理时间 < 5 分钟（30 分钟 Space）

### 安全要求
- ✅ 支付验证：验证 x402 签名和链上交易
- ✅ 防重放攻击：使用 nonce 和时间戳
- ✅ 数据隔离：转录文件存储在独立目录

### 可用性要求
- 99% uptime（生产环境）
- 支持移动端浏览
- 支持主流钱包（MetaMask, Coinbase Wallet, WalletConnect）

---

## 用户故事

### Story 1: 浏览和发现
```
作为一个 Crypto 爱好者
我想要浏览已转录的 Twitter Spaces
以便发现我感兴趣的讨论内容

验收标准:
- 首页显示所有已完成的转录
- 可以看到 Space 标题、创建者、时长
- 点击可以进入详情页查看完整转录
```

### Story 2: 转录新 Space
```
作为一个内容创作者
我想要转录一个重要的 Twitter Space
以便将内容整理成文章

验收标准:
- 可以输入 Space URL
- 可以使用钱包支付 0.2 USDC
- 无需支付 Gas 费
- 看到实时转录进度
- 转录完成后可以查看
```

### Story 3: AI 问答
```
作为一个研究人员
我想要对某个 Space 提问
以便快速了解特定话题的讨论

验收标准:
- 可以在详情页输入问题
- 可以使用钱包支付 0.5 USDC
- AI 基于转录内容回答
- 回答准确且有引用
```

---

## 产品路线图

### MVP（最小可行产品）
- [x] 基础转录功能（下载、Whisper、格式化）
- [x] 公开 Dashboard
- [ ] x402 支付集成（转录 + AI 聊天）
- [ ] OpenAI Agent SDK 集成
- [ ] 部署到生产环境

### V1.0（正式版本）
- [ ] 实时进度追踪（WebSocket）
- [ ] 高级搜索和过滤
- [ ] 用户个人中心（查看支付历史）
- [ ] 批量转录功能

### V2.0（增强版）
- [ ] 多语言支持
- [ ] 自定义 AI Agent（用户可以配置专属 Agent）
- [ ] API 接口开放（第三方集成）
- [ ] 订阅模式（月付无限使用）

---

## 关键指标（KPI）

### 业务指标
- **每日转录数**：目标 10+ Spaces/day
- **付费转化率**：浏览用户 → 付费转录 > 5%
- **AI 问答使用率**：查看转录 → 付费问答 > 10%
- **用户留存**：周留存率 > 30%

### 技术指标
- **转录成功率**：> 95%
- **API 可用性**：> 99%
- **支付成功率**：> 99%
- **平均响应时间**：< 2s

---

## 竞品分析

| 产品 | 优势 | 劣势 |
|------|------|------|
| **Otter.ai** | 实时转录、支持多平台 | 收费订阅、无 crypto 集成 |
| **Descript** | 功能强大、可编辑 | 复杂、昂贵 |
| **我们的产品** | Crypto 原生、公开库、AI 问答 | 仅支持 Twitter Space |

### 差异化优势
1. ✅ **Crypto 原生支付**：x402 无 Gas 费
2. ✅ **公开转录库**：所有人可浏览
3. ✅ **AI 增强**：OpenAI Agent SDK 问答
4. ✅ **按需付费**：不需要订阅

---

## 风险和挑战

### 技术风险
1. **Twitter API 限制** - 可能无法下载某些私密 Space
2. **转录准确度** - 依赖 Whisper 质量
3. **支付失败** - x402 协议稳定性

**缓解措施**：
- 提供手动上传音频选项
- 使用最新的 Whisper 模型
- 完善的错误处理和重试机制

### 业务风险
1. **版权问题** - 转录内容可能涉及版权
2. **用户量不足** - Cold start 问题
3. **成本控制** - OpenAI API 成本

**缓解措施**：
- 添加免责声明，用户承担版权责任
- 初期免费转录部分热门 Spaces 吸引用户
- 合理定价，确保收入 > 成本

---

## 成功定义

### 短期（3 个月）
- 累计转录 100+ Spaces
- 月活用户 50+
- 付费用户 10+
- 收入 > 成本

### 长期（1 年）
- 累计转录 1000+ Spaces
- 月活用户 500+
- 付费用户 50+
- 月收入 > $500
